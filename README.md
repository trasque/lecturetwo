# 5月度 課題2

「受注」クラスに必要な情報が揃っている場合に限り、出荷処理を行うプログラムです。  
出荷処理の際は、「伝票」クラスで管理された番号が発行され、「受注」の各インスタンスに保存されます。

## 「受注」クラスの情報

インスタンスは以下のような情報を持ちます

- 品名
- 数量
- 単価
- 送り先住所
- 伝票番号

### 「受注」クラスの持つ機能

1. インスタンスの受注情報を一覧表示します
2. インスタンスの運賃を計算します *（今後、分割予定）*
3. インスタンスが出荷可能な状態かを判定します *（出力方法を変更予定）*
4. 出荷処理を行います（同時に、「伝票」クラスから発行された伝票番号をインスタンスに保存します）

## 「伝票」クラスの情報

伝票番号をデータベース的に管理するクラスで、インスタンス変数は持ちません。  
伝票番号は「日付＋連番」という形式を持ち、日付が変わると連番はリセットされます。  
static 変数として、クラス内部でのみ利用可能な以下の情報を持ちます。

- その日の番号（連番）
- 直前に発行した伝票番号
- 番号リセット時のデフォルト設定値
- フォーマット形式の設定値

### 「伝票」クラスの機能

1. 伝票番号を生成し返します。日付が更新された場合は末尾の連番がリセットされます。

---

## 実行例

### 例1

引数なしでインスタンス `mikan` を作成し、受注情報を表示。

```
=====[例1]=====
= 引数なしで生成
= 全て初期値で出力される
===============
品名：設定なし
数量：設定なし
単価：設定なし
住所：設定なし
伝票：未発行
```

### 例2

インスタンス `suika` を品名・数量のみで作成し、運賃計算を実行します。  
数量はありますが、単価が未設定のため計算ができない旨を表示します。  
品名は「すいか」、数量は 5 が入れられています。  
その後、Setterを使って単価を設定し、改めて運賃計算をします。

```
=====[例2]=====
= 一部引数を指定し、運賃メソッドを使う
= 不足した設定値で計算 → 計算失敗
= 単価を設定して再計算
===============
単価が設定されていません
運賃は500円です
```

### 例3

インスタンス `negi` を作成します。`negi` は住所だけが不足しています。  
一覧表示の後、出荷可否を判定しますが、全ての情報が揃っていないため、発送不可と表示されます。

その後、情報を不足させたまま出荷処理を実行します。  
情報が不足しているため、出荷処理はその旨を表示し、現在のインスタンス状況を表示します。

未出荷の状態のまま、伝票番号を読み出そうとすると、まだ出荷されていない旨が表示されます。

```
=====[例3]=====
= 住所以外を指定し、発送可能かを調べる
= 発送を試みる → 情報が不足で失敗
= 未発送の状態で伝票番号を読み取ろうとする → 伝票番号未発行が表示
===============
品名：ねぎ
数量：8
単価：80
住所：設定なし
伝票：未発行
発送可能？：false
＜＜情報が不足しています：以下を確認してください＞＞
品名：ねぎ
数量：8
単価：80
住所：設定なし
伝票：未発行
発送されていません
```

### 例4

例3で不足していた住所を設定し、出荷処理を実行します。  
出荷可能なため、「伝票」クラスは伝票番号を発行します。

出荷処理は「伝票」クラスから受け取った伝票番号をインスタンスに保存します。  
発送確認のため、Getterでインスタンスの伝票番号を取得・表示します。

```
=====[例4]=====
= ねぎの住所を入れて発送する
= ねぎの情報を表示
===============
運賃は640円です
640円で発送しました!ねぎの伝票番号は:No20220518-1です
品名：ねぎ
数量：8
単価：80
住所：千葉県
伝票：No20220518-1
発送した時の伝票番号は20220518-1
```

### 例5

例1と例2で作成した `mikan` `suika` インスタンスに加え `tomato` `kani` も作成し、これをリスト化します。  
For文を使って、このリスト内の情報と出荷可否判定を一気に出力します。

```
=====[例5]=====
= 複数の品目をリストにする
= みかん、すいか、トマト、かに
= 現在の状態を列挙する
===============
◆◆◆◆
品名：設定なし
数量：設定なし
単価：設定なし
住所：設定なし
伝票：未発行
発送可能？：false
◆◆◆◆
品名：すいか
数量：5
単価：100
住所：設定なし
伝票：未発行
発送可能？：false
◆◆◆◆
品名：トマト
数量：20
単価：60
住所：埼玉県
伝票：未発行
発送可能？：true
◆◆◆◆
品名：かに
数量：3
単価：800
住所：栃木県
伝票：未発行
発送可能？：true
```

### 例6

例5で表示された内容をもとに、Setterで必要な情報を埋めます。  
全てのインスタンスが発送可能であることを確認し、一気に出荷処理を実行します。  
それぞれのインスタンスに連番で伝票番号が割り振られ、出荷完了となります。

```
=====[例6]=====
= 必要な情報を埋める
= すべての内容を確認する
= 全て発送可能なので、一気に発送する
===============
◆◆◆◆
品名：みかん
数量：25
単価：30
住所：沖縄県
伝票：未発行
発送可能？：true
◆◆◆◆
品名：すいか
数量：5
単価：100
住所：東京都
伝票：未発行
発送可能？：true
◆◆◆◆
品名：トマト
数量：20
単価：60
住所：埼玉県
伝票：未発行
発送可能？：true
◆◆◆◆
品名：かに
数量：3
単価：800
住所：栃木県
伝票：未発行
発送可能？：true
運賃は750円です
750円で発送しました!みかんの伝票番号は:No20220518-2です
運賃は500円です
500円で発送しました!すいかの伝票番号は:No20220518-3です
運賃は1200円です
1200円で発送しました!トマトの伝票番号は:No20220518-4です
運賃は2400円です
2400円で発送しました!かにの伝票番号は:No20220518-5です
```
